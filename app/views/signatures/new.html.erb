<div class="px-6 py-16 lg:px-8">
  <div class="mx-auto max-w-3xl text-base/7">
    <%= turbo_frame_tag "signature_form" do %>
      <div class="bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg max-w-md mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2">Sign the Manifesto</h1>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Join us in building a more sustainable digital future.</p>

        <% if local_assigns[:error] %>
          <div class="bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-700 text-red-800 dark:text-red-200 px-4 py-3 rounded mb-4">
            <%= error %>
          </div>
        <% end %>

        <%= form_with model: @signature, url: signatures_path, method: :post, data: { turbo_frame: "signature_form", controller: "turnstile" } do |f| %>
          <div class="mb-4">
            <label for="signature_name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Your Name
            </label>
            <%= f.text_field :name, required: true, class: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent", placeholder: "Jane Doe" %>
          </div>

          <div class="mb-4">
            <label for="signature_email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Email Address
            </label>
            <%= f.email_field :email, required: true, class: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent", placeholder: "your@email.com" %>
            <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">
              Used to verify your identity for the signature, it's encrypted so we can't read it.
            </p>
          </div>

          <% if Rails.env.test? %>
            <input type="hidden" name="cf-turnstile-response" value="test-token" />
          <% else %>
            <div class="mb-4 w-full" data-controller="turnstile">
              <style>
                [data-controller="turnstile"] {
                  width: 100% !important;
                }
                .cf-turnstile {
                  width: 100% !important;
                  display: block !important;
                }
                .cf-turnstile > div,
                .cf-turnstile iframe {
                  width: 100% !important;
                  max-width: none !important;
                  display: block !important;
                }
              </style>
              <div class="cf-turnstile w-full"
                   data-sitekey="<%= Rails.application.credentials.dig(:turnstile, :site_key) %>"
                   data-turnstile-target="widget"></div>
            </div>
          <% end %>

          <div class="mb-4">
            <%= f.submit "Continue", class: "w-full bg-teal-600 text-white dark:text-gray-100 px-6 py-2 rounded-lg hover:bg-teal-700 transition-colors cursor-pointer text-center" %>
          </div>
        <% end %>

        <div class="text-center">
          <%= link_to "Go back", root_path, class: "text-sm text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100", data: { turbo_frame: "_top" } %>
        </div>
      </div>
    <% end %>
  </div>
</div>
